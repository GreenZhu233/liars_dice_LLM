# 谎言骰子（Liar's Dice）多智能体对战平台

## 项目简介
谎言骰子（Liar's dice）是《骗子酒馆（Liar's Bar）》中的一个游戏模式。
本项目基于游戏中的规则，实现了一个多智能体对战平台，支持两种游戏模式：**AI对战模式（4xAI）** 和 **单人挑战模式（1人+3xAI）**。

## 游戏规则

### 👥 玩家与准备
*   4 名玩家参与。
*   每位玩家拥有：**5个骰子** 🎲 和 **2瓶毒药** ☠️。

### 🔁 游戏轮次
1.  **开局摇骰：** 每轮开始时，所有玩家**各自摇骰**，结果**仅自己可见**。
2.  **叫点阶段：**
    *   玩家**依次轮流**进行叫点。
    *   **首位玩家**可以宣称：“场上所有玩家手中，**至少 [数量] 个 [点数] 点**”。（例如：“至少 3 个 4 点”）。
    *   **点数范围：** 1 到 6 点。**注意：1 点在此游戏中不是万能骰子。**
3.  **下家行动：**
    *   **加注：** 必须使叫点满足 **以下条件之一**：
        *   `数量` **大于** 上家叫的数量。（例如：上家叫“4个5点”，你可叫“5个2点”）
        *   `数量` **等于** 上家叫的数量，但 `点数` **大于** 上家叫的点数。（例如：上家叫“4个5点”，你可叫“4个6点”）
        *   **不能**叫更小的数量或更小的点数（如“3个5点”、“4个4点”），也**不能**重复上家叫点（如“4个5点”）。
    *   **质疑：** 质疑上一位玩家的叫点。选择质疑则进入**结算阶段**。

### ⚖️ 结算阶段（当有人质疑时）
1.  **亮骰统计：** 所有玩家**亮出骰子**。
2.  **统计目标：** 统计场上**被质疑的叫点**（即上一位玩家叫的`点数`）的**实际总数量**。
3.  **判定胜负：**
    *   **质疑成功：** 如果实际数量 **<** 上家宣称的数量 → **被质疑者失败**。
    *   **质疑失败：** 如果实际数量 **>=** 上家宣称的数量 → **质疑者失败**。
4.  **失败惩罚：** 失败者**喝下一瓶毒药** ☠️。
5.  **死亡判定：** 任何玩家**喝完两瓶毒药**即**死亡出局** 💀。
6.  **本轮结束：** 结算后，**存活玩家**进入**下一轮**，重新开始摇骰。

### 🏆 游戏结束
*   当场上**仅剩一名玩家存活**时，游戏结束，该玩家获胜！👑

## 目录结构
- main_launcher.py：启动游戏的 GUI 界面
- multi_game_runner.py：批量自动对战脚本，支持多线程
- src：核心代码（如游戏逻辑、玩家实现等）
- config：配置文件（如玩家、密钥等）
- images：骰子图片资源
- logs：对局日志
- template：规则等文本模板

## 安装与依赖
1. Python >= 3.12
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

## 支持的模型
1. deepseek
   - deepseek-chat
   - deepseek-reasoner（推理模型，响应速度慢）
2. 豆包
   - doubao-1-5-lite-32k-250115
   - doubao-1-5-thinking-pro-250415（推理模型）
3. Gemini
   - gemini-2.5-flash-preview-05-20
4. 智谱
   - glm-z1-flash
   - glm-z1-air（推理模型，响应速度慢）
5. 千问
   - qwen-max-0125
6. 混元
   - hunyuan-t1-latest（推理模型）
7. 讯飞星火
   - x1（推理模型）

## 快速开始

### 启动 GUI 版
```bash
python main_launcher.py
```

### 批量自动对战
```bash
python multi_game_runner.py <总对局数> -t [线程数] [玩家参数]
```
示例：
```bash
python multi_game_runner.py 10 -t 1 --name1 doubao --model1 doubao-1-5-lite-32k-250115 --name2 deepseek --model2 deepseek-chat --name3 gemini --model3 gemini-2.5-flash-preview-05-20 --name4 qwen --model4 qwen-max-0125
```
在启动批量自动对战前，请确保需要的模型API秘钥已在 `config/keys.json` 中配置完成。

## 其他说明
- 所有对局日志保存在 `logs` 目录。

## 引用声明（Credits）：
本项目中部分提示词内容与代码框架参考并改编自开源项目[liars-bar-llm](https://github.com/LYiHub/liars-bar-llm)，原项目基于 Apache License 2.0 发布。感谢其贡献者的开放共享精神。